@using FinanceTracker.Web.States.Categories
@using FinanceTracker.Web.States.Categories.DTOs

<div class="category-card" style="border-left: 4px solid @CurrentCategory.Color.Color;">
    <div class="category-icon" style="background: @(CurrentCategory.Color.Color)22; color: @CurrentCategory.Color.Color;">
        <span class="material-icons">@CurrentCategory.Icon.Source</span>
    </div>
    <div class="category-info">
        <h3 class="category-name">@CurrentCategory.Name.Name</h3>
        <div class="category-meta">
            <span class="category-color" style="background: @CurrentCategory.Color.Color;"></span>
            <span class="category-color-code">@CurrentCategory.Color.Color</span>
        </div>
    </div>
    <div class="category-actions">
        <button class="btn-icon" @onclick="HandleEdit">
            <span class="material-icons">edit</span>
        </button>
        <button class="btn-icon btn-danger" @onclick="HandleDelete">
            <span class="material-icons">delete</span>
        </button>
    </div>
</div>

@code {
    /// <summary>
    /// Categoria actual a mostrar
    /// </summary>
    [Parameter] 
    [EditorRequired]
    public CategoryModel CurrentCategory { get; set; }

    /// <summary>
    /// 
    /// </summary>
    [Parameter] 
    public EventCallback<Guid> OnEdit { get; set; }

    /// <summary>
    /// 
    /// </summary>
    [Parameter] 
    public EventCallback<Guid> OnDelete { get; set; }

    /// <summary>
    /// 
    /// </summary>
    /// <returns></returns>
    private async Task HandleEdit() => await OnEdit.InvokeAsync(CurrentCategory.Id);

    /// <summary>
    /// 
    /// </summary>
    /// <returns></returns>
    private async Task HandleDelete() => await OnDelete.InvokeAsync(CurrentCategory.Id);
}
