@* @using FinanceTracker.Web.States.Categories

<Modal IsVisible="@IsVisible"
       Title="@GetTitle()"
       OnClose="@OnClose"
       OnSave="@HandleSave">
    <div class="form-group">
        <label>Nombre</label>
        <input type="text" class="form-input" @bind="Category.Name" placeholder="Ej: Alimentación" />
    </div>
    <div class="form-group">
        <label>Color (Hex)</label>
        <input type="text" class="form-input" @bind="Category.Color" placeholder="#22c55e" />
    </div>
    <div class="form-group">
        <label>Icono (Material Icon)</label>
        <input type="text" class="form-input" @bind="Category.Icon" placeholder="restaurant" />
        <small style="color: var(--text-muted); font-size: 12px; display: block; margin-top: 5px;">
            Ver iconos en: <a href="https://fonts.google.com/icons" target="_blank" style="color: var(--accent-blue);">Google Material Icons</a>
        </small>
    </div>
    <div class="form-group">
        <label>Vista Previa</label>
        <div class="category-preview" style="background: @(Category.Color)22; color: @Category.Color; border: 2px solid @Category.Color;">
            <span class="material-icons" style="font-size: 32px;">@Category.Icon</span>
            <span style="font-weight: 600; margin-left: 10px;">@Category.Name</span>
        </div>
    </div>
</Modal>

@code {
    [Parameter] public bool IsVisible { get; set; }
    [Parameter] public bool IsEditing { get; set; }
    [Parameter] public CategoryModel Category { get; set; } = new();
    [Parameter] public EventCallback OnClose { get; set; }
    [Parameter] public EventCallback<CategoryModel> OnSave { get; set; }

    private string GetTitle()
    {
        return IsEditing ? "Editar Categoría" : "Nueva Categoría";
    }

    private async Task HandleSave()
    {
        if (string.IsNullOrWhiteSpace(Category.Name))
            return;

        await OnSave.InvokeAsync(Category);
    }
}
 *@